<!--URL page name-->
@page "/searchbar" 

<PageTitle>Search Bar</PageTitle>

<!--Old attempt, ignore but keeping incase I need it later-->
<!--<input id="txtWord" name="txtWord" placeholder="Search.."  value="@SearchInput" @onchange="onChange" @onkeyup="Enter" /> -->

<!--This is the acutal search box, variable name 'SearchTerm'-->
<input @bind="SearchTerm" @bind:event="oninput" placeholder="Search.." />

<!--This is the search box clear button, trigger 'ClearClick' method-->
<button class="btn btn-primary" type="button" onclick="@ClearClick">Clear</button>

<br>

<!--Shows the total returned number of results by counting the number in the FilteredSearch List-->
<span class="text-muted ml-5">
    Showing @FilteredSearch.Count Results
</span>

<br>
<br>

<!--Lists each object name from the FilteredSearch list on the page in a list-->
<ul>
    @foreach (var search in FilteredSearch)
    {
        <li>@search.Name</li>
    }
</ul>

@code {

    //creates a new list of SearchItem objects
    List<SearchItem> FilteredSearch2 = new List<SearchItem> { };

    //creates a SearchItem object with Name only as of now (update later)
    public class SearchItem
    {
        public string? Name { get; set; }
    }

    // Initialize SearchTerm to "" to prevent null's
    string SearchTerm { get; set; } = "";

    // Will list objects with data, this will be read in from csv file later
    List<SearchItem> SearchItems => new List<SearchItem>
    {
        new SearchItem { Name = "Dorms and Housing" },
        new SearchItem { Name = "Class Schedule" },
        new SearchItem { Name = "Dorm Laundry" },
        new SearchItem { Name = "Professor Office Hours" }
    };

    //clears the search bar after clear button is pressed
    private void ClearClick()
    {
        SearchTerm = "";
        this.FilteredSearch2 = new List<SearchItem> { }; //clears object list
    }

    //filtering stored in new FilteredSearch variable where SearchItem is in listed object
    List<SearchItem> FilteredSearch => SearchItems.Where(i => i.Name.ToLower().Contains(SearchTerm.ToLower())).ToList();

}



<!--
This is just the other UI I was working with before the dev team decided on the way to display it
Leave it here in case I need some of it later
-->

<!--

<input @bind="SearchTerm" @bind:event="oninput" placeholder="Search.." />

<button class="btn btn-primary" type="button" onclick="@SearchClick">Search</button>
<button class="btn btn-primary" type="button" onclick="@ClearClick">Clear</button>


<br>
<span class="text-muted ml-5">
    // Showing @FilteredSearch.Count out of @SearchItems.Count 
</span>
<br>
<br>

<ul>
    @if (this.FilteredSearch2.Count == 0)
    {

        @foreach (var search in @SearchItems)
        {
            <li>@search.Title</li>
        }
    }
    else
    {
        @foreach (var search in @FilteredSearch2)
        {
            <li>@search.Title</li>
        }
    }

</ul>


@code {
    List<SearchItem> FilteredSearch2 = new List<SearchItem> { };

    public class SearchItem
    {
        public string? Title { get; set; }
    }

    // Initialize SearchTerm to "" to prevent null's
    string SearchTerm { get; set; } = "";

    // Imagine this was retrieved from an API, just hardcoding for demo purposes
    List<SearchItem> SearchItems => new List<SearchItem>
    {
        new SearchItem { Title = "Dorms and Housing" },
        new SearchItem { Title = "Class Schedule" },
        new SearchItem { Title = "Dorm Laundry" },
        new SearchItem { Title = "Professor Office Hours" }
    };


    private void onChange(Microsoft.AspNetCore.Components.ChangeEventArgs args)
    {
        SearchTerm = (string)args.Value;
    }

    public void Enter(KeyboardEventArgs e)
    {
        if (e.Code == "Enter" || e.Code == "NumpadEnter")
        {

        }
    }

    protected void SearchClick()
    {
        this.FilteredSearch2 = SearchItems.Where(i => i.Title.ToLower().Contains(SearchTerm.ToLower())).ToList();

    }

    private void ClearClick()
    {
        SearchTerm = "";
        this.FilteredSearch2 = new List<SearchItem> { };
    }

    public int Count(string search)
    {
        //potentially helpful query for sql later on
        //"SELECT COUNT(*) FROM [TABLE] WHERE [Title] LIKE '%{search}%'"
        return 0;
    }



}
-->
